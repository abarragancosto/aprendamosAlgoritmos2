const Alexa = require('ask-sdk-core');
const handlers = require('./handlers');

const persistenceAdapter = require('./utils/persistenceAdapter')();
const saveAttributes = require('./utils/saveAttributes');

exports.handler = Alexa.SkillBuilders.custom()
    .addRequestHandlers(
        handlers.rememberProgress,
        handlers.resolveProblemHandler,
        handlers.starNewProgress,
        handlers.defaultAfterLaunch,
        handlers.silenciarIntent,
        handlers.algoritmos,
        handlers.creditos,
        handlers.passwordHandlerWhenStart,
        handlers.needPassword,
        handlers.changePassword,
        handlers.pasoCuatro,
        handlers.pasoDos1,
        handlers.pasoDos2,
        handlers.pasoInicio1,
        handlers.pasoInicio2,
        handlers.pasoInicio3,
        handlers.pasoTres1,
        handlers.pasoTres2,
        handlers.pasoUno1,
        handlers.pasoUno2,
        handlers.enunciado,
        handlers.levelHard,
        handlers.levelMedium,
        handlers.medioproblemaUnopasoDosCandidatos,
        handlers.medioproblemaUnopasoDosCandidatosFallo,
        handlers.medioproblemaUnopasoDosDistancias,
        handlers.medioproblemaUnopasoDosDistanciasFallo,
        handlers.medioproblemaUnopasoDosNodo,
        handlers.medioproblemaUnopasoDosNodoFallo,
        handlers.medioproblemaUnopasoInicioCandidatos,
        handlers.medioproblemaUnopasoInicioCandidatosFallo,
        handlers.medioproblemaUnopasoInicioDistancias,
        handlers.medioproblemaUnopasoInicioDistanciasFallo,
        handlers.medioproblemaUnopasoTresCandidatos,
        handlers.medioproblemaUnopasoTresCandidatosFallo,
        handlers.medioproblemaUnopasoTresDistancias,
        handlers.medioproblemaUnopasoTresDistanciasFallo,
        handlers.medioproblemaUnopasoTresNodo,
        handlers.medioproblemaUnopasoTresNodoFallo,
        handlers.medioproblemaUnopasoUnoCandidatos,
        handlers.medioproblemaUnopasoUnoCandidatosFallo,
        handlers.medioproblemaUnopasoUnoDistancias,
        handlers.medioproblemaUnopasoUnoDistanciasFallo,
        handlers.medioproblemaUnopasoUnoNodo,
        handlers.medioproblemaUnopasoUnoNodoFallo,
        handlers.medioproblemaDospasoDosCandidatos,
        handlers.medioproblemaDospasoDosCandidatosFallo,
        handlers.medioproblemaDospasoDosDistancias,
        handlers.medioproblemaDospasoDosDistanciasFallo,
        handlers.medioproblemaDospasoDosNodo,
        handlers.medioproblemaDospasoDosNodoFallo,
        handlers.medioproblemaDospasoInicioCandidatos,
        handlers.medioproblemaDospasoInicioCandidatosFallo,
        handlers.medioproblemaDospasoInicioDistancias,
        handlers.medioproblemaDospasoInicioDistanciasFallo,
        handlers.medioproblemaDospasoTresCandidatos,
        handlers.medioproblemaDospasoTresCandidatosFallo,
        handlers.medioproblemaDospasoTresDistancias,
        handlers.medioproblemaDospasoTresDistanciasFallo,
        handlers.medioproblemaDospasoTresNodo,
        handlers.medioproblemaDospasoTresNodoFallo,
        handlers.medioproblemaDospasoUnoCandidatos,
        handlers.medioproblemaDospasoUnoCandidatosFallo,
        handlers.medioproblemaDospasoUnoDistancias,
        handlers.medioproblemaDospasoUnoDistanciasFallo,
        handlers.medioproblemaDospasoUnoNodo,
        handlers.medioproblemaDospasoUnoNodoFallo,
        handlers.dificilproblemaUnopasoDosCandidatos,
        handlers.dificilproblemaUnopasoDosCandidatosFallo,
        handlers.dificilproblemaUnopasoDosDistancias,
        handlers.dificilproblemaUnopasoDosDistanciasFallo,
        handlers.dificilproblemaUnopasoDosNodo,
        handlers.dificilproblemaUnopasoDosNodoFallo,
        handlers.dificilproblemaUnopasoInicioCandidatos,
        handlers.dificilproblemaUnopasoInicioCandidatosFallo,
        handlers.dificilproblemaUnopasoInicioDistancias,
        handlers.dificilproblemaUnopasoInicioDistanciasFallo,
        handlers.dificilproblemaUnopasoTresCandidatos,
        handlers.dificilproblemaUnopasoTresCandidatosFallo,
        handlers.dificilproblemaUnopasoTresDistancias,
        handlers.dificilproblemaUnopasoTresDistanciasFallo,
        handlers.dificilproblemaUnopasoTresNodo,
        handlers.dificilproblemaUnopasoTresNodoFallo,
        handlers.dificilproblemaUnopasoUnoCandidatos,
        handlers.dificilproblemaUnopasoUnoCandidatosFallo,
        handlers.dificilproblemaUnopasoUnoDistancias,
        handlers.dificilproblemaUnopasoUnoDistanciasFallo,
        handlers.dificilproblemaUnopasoUnoNodo,
        handlers.dificilproblemaUnopasoUnoNodoFallo,
        handlers.dificilproblemaUnopasoCuatroNodo,
        handlers.dificilproblemaUnopasoCuatroNodoFallo,
        handlers.dificilproblemaUnopasoCuatroCandidatos,
        handlers.dificilproblemaUnopasoCuatroCandidatosFallo,
        handlers.dificilproblemaUnopasoCuatroDistancias,
        handlers.dificilproblemaUnopasoCuatroDistanciasFallo,
        handlers.resolveProblemHandler,
        handlers.LaunchRequestHandler,
        handlers.HelpIntentHandler,
        handlers.CancelAndStopIntentHandler,
        handlers.SessionEndedRequestHandler,
        handlers.IntentReflectorHandler
    )
    .addErrorHandlers(
        handlers.ErrorHandler,
    ).addResponseInterceptors(
        saveAttributes
    )
    .withPersistenceAdapter(
        persistenceAdapter
    )
    .lambda();
